<html>
  <head>
    <title id="title">5 reasons to give node.js some love</title>
    <link rel="stylesheet" type="text/css" href="/style.css"></link>
    <meta name="Description" content="Rob Ashton's blog and various other things. Javascript, C#, testing, whatever.">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-11207442-1']);
      _gaq.push(['_setDomainName', 'codeofrob.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body>
    <a href="http://feeds.feedburner.com/RobAshton">Subscribe to my blog</a>
    <div id="blog-entry">
      <h1 id="post-title">5 reasons to give node.js some love</h1>
      <div id="post">
		<p>In response to a question from a friend on Twitter (Private account so no linky), but with the text: </p>

<p>"Been reading up a little bit on node.js @robashton @domgreen. What makes it stand out from alternatives or is it just a JS 'me too' play?"</p>

<p>My initial response was, hey - you know what? I can't think of any (popular) alternatives that provide the unique combination that node.js does, and then started writing a torrent of tweets describing why I personally am so excited about node.</p>

<p>Then I decided that rather than spam Twitter, I should write a blog post to link to when asked the same question in the future.</p>

<p>Every bugger has already done one of these, but I want to answer the question in my own personal way</p>

<b>1) You get to write Javascript on the server and the client</b>

<p>Think about this for a second - it's really not just a gimmick (although some people seem to think it is). Even in a simple web application you're going to have validation logic that you're going to want to execute on the client AND on the server, and usually this can't be shared without going through some sort of rules engine or crazy framework to spit out some rough client-side equivalents. </p>

<p>No need with node, you can write your model (complete with business rules, etc), and write a nice task-based user interface around that model, running it all locally in the browser, and then dispatching and validating the commands on the server - because hey, everything is just JSON at the end of the day, and everything you're writing works against that.</p>

<p>Take this a step further, and consider that we have some pretty awesome document databases on the scene at the moment whose primary communication and storage mechanism is - guess what? JSON (well BSON) - at no point during any of this do you need to sit there dealing with mapping frameworks or hand-written mapping code, because you're just flinging JSON around.</p>

<p>With efforts on <a href="http://www.commonjs.org/">CommonJS</a> and <a href="https://github.com/sstephenson/stitch">Stitch</a> ongoing, there is really no excuse for not writing all your JavaScript in a state where it can be executed on both the client and the server.</p>

<b>2) Event-based asynchronous stuff is just How Things Work in JavaScript </b>

<p>Yeah okay, I have no idea what I'm talking about here, but what I do understand and what most people who have been writing JavaScript for the past decade understand is that <i>your</i> JavaScript tends to execute on a single thread and long-running processes get dealt with by the host, using callbacks to notify you (back on that single thread) as and when those things are done.</p>

<p>Now, in the browser these long-running requests are limited to... well HTTP calls to the server to get/post data, but on the server we do nearly <i>everything</i> like this; requests to other machines, requests to the file system etc.</p>

<p>We don't need any crazy language keywords (looking at you C#), we don't need any crazy Task of X/Y and Z objects (Looking at you C#), we just need: </p>

<script src="https://gist.github.com/949550.js?file=gistfile1.js"></script>

<p>This gives us some brilliant performance benefits, dealing with potentially gazillions of connected clients an <a href="http://www.theregister.co.uk/2011/03/01/the_rise_and_rise_of_node_dot_js/">easy possibility</a> <i>Sorry for a "the register" link this early in the morning, it's a bit indecent of me.</i></p>

<p>This also makes dealing with concurrency (at least within a single process) really easy too, all your variables are safe to be accessed at any time as you haven't got any potential race conditions, you can mutate state all you want and not worry that somebody else is going to come along and take away your cheese.</p>

<p>Hell, even the plans for future-node seem to be keeping this philosophy intact, with multiple node processes being given a way to communicate safely (or at least as far as I understand the slides that I've read from conferences I wasn't at).</p>

<b>3) Awesome package management!</b>

<p>Just like Ruby, and just like Linux-land in general, if you want to do something there is probably a library/package waiting for you to pull down and consume, and you can do this via the wonderful magic of <a href="http://npmjs.org/">NPM</a></p>

<p>npm install socket.io</p>

<p>It's that easy to get the libraries you need, and there are libraries available for most of the things you can think of, the primary ones I am using myself are: </p>

<ul>
     <li><a href="https://github.com/felixge/node-paperboy">Paperboy</a> - for simply serving static files from a directory (index.html, style.css, etc</li>
     <li><a href="https://github.com/donnerjack13589/node.gzip">gzip</a> - for um, gzipping content that I send down to the client</li>
     <li><a href="http://socket.io/">socket.io</a> - for magically doing websockets, or at the very least emulating websockets</li>
     <li><a href="https://github.com/tmpvar/jsdom">jsdom</a> + jquery - manipulating the DOM server-side? Oh say it ain't so?</li>
     <li><a href="https://github.com/sstephenson/stitch">Stitch</a> for allowing me to write code in CommonJS format and still use it in the browser.</li>
</ul>

<p>This isn't anything particularly unique to node, but in this day and age it's a bit hard to be taken seriously without a good package manager in your ecosystem and it's good to see something of quality here.</p>

<b>4) Community community community</b>

<p>The community around node.js is brilliantly active, passionate and y'know - generally quite bright - and willing to try new things out (Kinda goes with the territory really)</p>

<p>This, just like Ruby, is a really big draw for those of us from ecosystems which... lack anything of this scale</p>

<p>This enthusiasm does make it a bit difficult to separate actual innovation occurring from the old "Look at JavaScript doing what everything else has been able to do forever", but I'll take raw enthusiasm over rigid nay-say mentality any day - enthusiasm is contagious and gives me the ability to Get Things Done</p>

<b>5) It's easy, really easy, like super easy, We can all do it!</b>

<p>JavaScript aside (And if you don't like JavaScript you can always use CoffeeScript), the process of writing code that does exciting stuff is ludicrously simple.</p>

<p>Having direct access to the HTTP pipeline, and not hiding it behind crazy levels of abstracted framework cruft is a big, big win - and once you start writing code like this you start to wonder where this kind of thing has been all your life.</p>

<p>"I want to do this: " has not once resulted in me banging my head against the constraints and limitations that somebody else has put in my way (supposedly to help me).</p>

<p>My personal website currently runs on pixie dust and grated unicorn horns - I'm pulling in content from my old subtext blog and spitting it out on the front page (with plans to pull in content from <a href="http://codebetter.com/robashton/">CodeBetter</a> and <a href="http://altdevblogaday.org/author/rob-ashton/">Altdevblogaday</a> too), whilst acting as a reverse proxy for the old site (in very few lines of code). </p> 

<p>That's utterly crazy, and I drafted it up in just a few hours of hackity hack hack hacking, with those goals in mind.</p>

<b>Anyway...</b>

<p>The beauty of node comes in the combination of these attributes, not just one thing (because none of those things bar point #1 are by themselves particularly new or ground breaking</p>

<p>If you've previously dismissed node as something pointless because you think it brings nothing new to the table compared to your X, Y or Z then I urge you to have another look at it, as The Creators prepare to bring it natively to Windows it's only going to get more popular and you'll want to be involved.</p>

	</div>
      <div id="links">
        <a href="/">Go back to the index</a><br />
        <a href="http://feeds.feedburner.com/RobAshton">Subscribe to my blog</a>
        <a href="http://twitter.com/robashton">@robashton</a>
      </div>
      <div id="disqus">
        <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'codeofrob'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
    <div id="post-comments"><div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=0e747083685b78a6fb3f264b48ab253d&size=50&default=identicon"/>
<p>tobi</p></div>
<div class="comment-body">
<br/> 				"That's utterly crazy, and I drafted it up in just a few hours of hackity hack hack hacking, with those goals in mind."What made this easier than in C#? Couldn't you just have an MVC action method that responds to the route "{*url}"?"We don't need any crazy language keywords (looking at you C#), we don't need any crazy Task of X/Y and Z objects (Looking at you C#), we just need"What is your experience with this style of programming? Without having tried it, I would be concerned that the continuation passing style spreads throughout the app far more than one would like. The easiest solution in C# is to just be synchronous which is not an option on node.js.
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=7ae7575420336966224df378f634ad98&size=50&default=identicon"/>
<p>Frank Quednau</p></div>
<div class="comment-body">
<br/> 				As to 2), nobody stops you from doing API signatures like void Read(string, Action&lt;Result&rt; onDone); in C#, but to whom am I talking :)
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=b6a6693f03003f7ab0f9b0882e9c2dde&size=50&default=identicon"/>
<p>robashton</p></div>
<div class="comment-body">
<br/> 				Tobi :: What made this easier than in C#? Couldn't you just have an MVC action method that responds to the route "{*url}"?No - think about how you'd stream the content in a non-blocking and safe manner, how you'd make sure you didn't end up with lots of dead connections, how you'd parse the page data to get the content out (jquery $('.post')) etc, these are non-trivial problems that node makes easy.In experience, having callbacks doesn't cause a problem if you structure your code well, there is a style of Javascript where you NEVER use return values and just do everything with callbacks (I don't subscribe to it), but the code I've seen that does that is very tidy about how methods are placed and how the 'this' context is controlled
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=b6a6693f03003f7ab0f9b0882e9c2dde&size=50&default=identicon"/>
<p>robashton</p></div>
<div class="comment-body">
<br/> 				Frank - absolutely, but how are you going to make sure that onDone executes on the original calling thread? ;-)
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=7ae7575420336966224df378f634ad98&size=50&default=identicon"/>
<p>Frank Quednau</p></div>
<div class="comment-body">
<br/> 				Ah, nice point, now I see where you're coming from with Task, etc...
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=f2fbdc6722a747b791658e37592f4757&size=50&default=identicon"/>
<p>Bart Czernicki</p></div>
<div class="comment-body">
<br/> 				Check out the upcoming async framework in .NET...the "callback" and making sure its on the proper synchronization context is all done for you using the async & await keywords.  Yes I know its one "crazy language" (as you put it) keyword, but GASP I can think this code is pretty terse:private async void button1_Click(object sender, RoutedEventArgs e){    string url = "http://reedcopsey.com";    string content = await new WebClient().DownloadStringTaskAsync(url);}On a side note, PLINQ is pretty darn powerful declarative language that you don't get with JavaScript (jLinq doesn't count).
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=b6a6693f03003f7ab0f9b0882e9c2dde&size=50&default=identicon"/>
<p>robashton</p></div>
<div class="comment-body">
<br/> 				I'd ignore PLINQ in this category as we're talking about asynchrony rather than parallellisation  I don't really like the way continuations work with async/await - in the same way as with yield, it might yield in functional code but having your instruction pointer leap about your code because of strange language key words is just plain weird :-)
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="/images/IdenticonHandler.ashx?code=1057790411"/>
<p>pete w</p></div>
<div class="comment-body">
<br/> 				I have been watching this closely, along with IronJs and Node.NET which is a .NET port of the Node.js concept.Obviously the Node.NET port doesnt have nearly as large of a community nor the automatic packaging, but for those of us with a heavy investment in code running on the .NET framework it plays nicely into our existing components.Node.js reminds me of sinatra, but with a lot more scalability, very exciting!
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=3a91118de6e599fd746a57dc0eb3e38c&size=50&default=identicon"/>
<p>Magesh</p></div>
<div class="comment-body">
<br/> 				Is there a RSS link for your blog??
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=b6a6693f03003f7ab0f9b0882e9c2dde&size=50&default=identicon"/>
<p>robashton</p></div>
<div class="comment-body">
<br/> 				Sure, http://feeds.feedburner.com/robashton
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=135f43f957955790babfbb559f733f5b&size=50&default=identicon"/>
<p>CPR Classes Dallas</p></div>
<div class="comment-body">
<br/> 				Tell you what, my site needs some 'awesome package management' and a community to get around it.  Can anyone help me with this??
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=320936888fbbe3dfe179d51d1bac30ef&size=50&default=identicon"/>
<p>reading glasses</p></div>
<div class="comment-body">
<br/> 				Taking a step further and argue that we have some pretty amazing document database on the scene today, whose main mechanism of communication and storage is - guess what? JSON (very BSON) - anything that you should not be there, dealt with mapping frames, hand, or the mapping of code, because you're just throwing around the JSON.
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=320936888fbbe3dfe179d51d1bac30ef&size=50&default=identicon"/>
<p>New York SEO Services</p></div>
<div class="comment-body">
<br/> 				If node has already rejected as useless, because he thinks it adds nothing new to the table against your X, Y or Z, then I urge you to take another look at what designers are prepared to bring non-native Windows popular will and you want to be involved.
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=64f7d95d04f481ac8309655e346eaa2c&size=50&default=identicon"/>
<p>Pasha</p></div>
<div class="comment-body">
<br/> 				New to some web programming and blogs are quite good to learn some tips and knowledge sharing as well.I do like the content and please keep updating the content and appreciation to have good text.
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=8a07bb29a6a791d79b980c93bb75b8ed&size=50&default=identicon"/>
<p>Paul Evans</p></div>
<div class="comment-body">
<br/> 				Just catching up on my friends blogs.  One minor comment, you can write code very much like that snippet doing async stuff without that much cruft in C# just by using the APM model & lambda expressions.static void Main(string[] args)        {            File.WriteAllText("hello.txt", "Hello World");            var response = Console.Out;            var b = new byte[4096];            var fs = new FileStream("hello.txt", FileMode.Open, FileAccess.Read, FileShare.Read, b.Length, true);            fs.BeginRead(b, 0, b.Length,                ar =&rt; { int read = fs.EndRead(ar); response.Write(UTF8Encoding.UTF8.GetChars(b, 0, read)); fs.Close(); }, null);            // Async, so readline prevents exit            Console.ReadLine();        }
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=b6a6693f03003f7ab0f9b0882e9c2dde&size=50&default=identicon"/>
<p>robashton</p></div>
<div class="comment-body">
<br/> 				No sure - and if I'm doing any async stuff in C# that's how I do it, I'm not afraid of callbacks and calling a callback a callback.The biggest difference between .NET BCL and node in this case is that in node it's all async by default - and people generally (and sadly) choose the defaults 
				</div></div>
</div>
  </body>
</html>
