<!doctype html> <!--[if ie 7]> <html lang="en" class="ie7"> <![endif]-->
<!--[if ie 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if ie 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !ie]><!-->
<html lang="en"> <!--<![endif]-->
<head>
    <title id="title">Looking at Kotlin - Classes and Functions</title>
    <meta charset="utf-8">
    <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="Description" content="Rob Ashton's blog and various other things. Javascript, C#, testing, whatever.">
    <meta name="author" content="">
    <link rel="alternate" type="application/atom+xml" href="http://feed.codeofrob.com/RobAshton" title="Rob Ashton's blog" />
    <link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/headers/header1.css">
    <link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="/assets/css/style_responsive.css">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/assets/plugins/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="/assets/css/themes/default.css">
    <link rel="stylesheet" type="text/css" href="/style.css"></link>
    <link rel="stylesheet" type="text/css" href="/rainbow.css"></link>
    <script type="text/javascript" src="/assets/js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-11207442-1']);
      _gaq.push(['_setDomainName', 'codeofrob.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body>
    <div class="header">
        <div class="container">
            <div class="logo">
             <h2><a href="/index.html">Rob Ashton</a></h2>
            </div>
            <div class="navbar">
                <div class="navbar-inner">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                    </a>
                    <div class="nav-collapse collapse">
                        <ul class="nav top-2">
                          <li>
                                <a href="/">Home</a>
                            </li>
                            <li>
                                <a href="/blog.html">Blog</a>
                            </li>
                            <li>
                                <a href="/statements.html">Testimonials</a>
                            </li>
                            <li>
                                <a href="/hire.html">Hire Me</a>
                            </li>
                    </div>
                </div>
            </div>
        </div>
    </div>

  <body>
    <div id="blog-entry">
      <h1 id="post-title">Looking at Kotlin - Classes and Functions</h1>
      <h6>Published on <span class="date">2013-5-17</span></h6>
      <div id="post"><p>I&#39;m writing up my notes on Kotlin and this is the second entry</p>
<ul>
<li><a href="/entries/looking-at-kotlin---a-few-notes-made.html">Looking at Kotlin - getting started</a></li>
<li>Looking at Kotkin - Classes and Functions</li>
</ul>
<p>What better place to start investigating Kotlin than classes and functions, the basic constructs in any Javariffic language.</p>
<p><em>Taking the &#39;ction&#39; out of function</em></p>
<p>What I immediately like about Kotlin that the hello world example (beyond the laborious exercise of getting it compiled) is really simple.</p>
<pre><code>fun main(args : Array<span class="tag">&lt;<span class="title">String</span>&gt;</span>) {
  println("Hello world")
}</code></pre>
<p>There are no import statements, I haven&#39;t had to create a containing static class with a static method etc, I&#39;ve not had to tell it where println is coming from and I haven&#39;t had to write &#39;function&#39; which makes it immediately 60% better than JavaScript and 260% better than Java.</p>
<p>I&#39;m not sure how modules work in Kotlin yet, or how you&#39;d share these functions between projects (That means getting into some Javariffic cruft I imagine), but I&#39;m able to create other files in the project with more functions like so:</p>
<p><em>secondary.kt</em></p>
<pre><code><span class="keyword">fun</span> do<span class="variable">Something</span>() <span class="tuple">{
  <span class="function_name">println</span>(<span class="string">"I'm doing something"</span>)
}</span></code></pre>
<p>and call them from my other files ala</p>
<p><em>main.kt</em></p>
<pre><code>fun main(args : Array<span class="tag">&lt;<span class="title">String</span>&gt;</span>) {
  doSomething()
}</code></pre>
<p>Without dancing through any hoops so that&#39;s cool.</p>
<p>In JavaScript I&#39;d be using require statements for this, which is great because dependencies are made explicit and I can follow them manually. </p>
<p>In a tooling-oriented language like Kotlin we can rely on the intellisense to tell us where stuff came from so this makes sense. (Although it makes it less ideal for vimming it up)</p>
<p><em>Class action Kotlin</em></p>
<p>Classes are interesting in Kotlin, they&#39;re rather reminiscent of constructor functions in JavaScript</p>
<pre><code><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="title">age</span>: <span class="title">Int</span>, <span class="title">name</span>: <span class="title">String</span>) {</span>

}</code></pre>
<p>and to create it (notice the lack of a new key-word)</p>
<pre><code><span class="title">var</span> person = Person(<span class="number">27</span>, <span class="string">"Rob"</span>)</code></pre>
<p>However, we start to encounter differences almost immediately - let&#39;s try adding a function</p>
<pre><code><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="title">age</span>: <span class="title">Int</span>, <span class="title">name</span>: <span class="title">String</span>) {</span>
  fun sayHello() {
    println(<span class="string">"Hi, I am $name, and I am $age years old"</span>)
  }
}</code></pre>
<p>Ignoring the string interpolation at this point (any good sane language has this good feature these days) age and name don&#39;t actually exist at this point, we have to declare them as fields in the class and to do this we do:</p>
<pre><code><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="title">age</span>: <span class="title">Int</span>, <span class="title">name</span>: <span class="title">String</span>) {</span>
  <span class="keyword">var</span> age = age
  <span class="keyword">var</span> name = name

  fun sayHello() {
    println(<span class="string">"Hi, I am $name, and I am $age years old"</span>)
  }
}</code></pre>
<p>Or short-hand:</p>
<pre><code><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="title">var</span> <span class="title">age</span>: <span class="title">Int</span>, <span class="title">var</span> <span class="title">name</span>: <span class="title">String</span>) {</span>

  fun sayHello() {
    println(<span class="string">"Hi, I am $name, and I am $age years old"</span>)
  }
}</code></pre>
<p>This feels a bit weird and unnecessary (if I understand it correctly), I&#39;m all for having to explicitly declare those properties if we want to access them externally but I don&#39;t see why we&#39;d be passing state in if we didn&#39;t want to use it.</p>
<p>Now we&#39;ve declared those as vars, we can access them externally too, because those vars are public and write-only by default.</p>
<pre><code>fun main(args: Array&lt;string&gt;) {
  var person = Person(<span class="number">27</span>, <span class="string">"Rob"</span>)
  println(<span class="string">"I can access <span class="subst">${person.name}</span> from here"</span>)
}</code></pre>
<p>We actually have an immutable key-word too, which is &#39;val&#39;, we can make read-only properties therefore with:</p>
<pre><code><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="title">val</span> <span class="title">age</span>: <span class="title">Int</span>, <span class="title">val</span> <span class="title">name</span>: <span class="title">String</span>) {</span>

  fun sayHello() {
    println(<span class="string">"Hi, I am $name, and I am $age years old"</span>)
  }
}</code></pre>
<p><em>Access control in classes</em></p>
<p>I&#39;m not a huge fan of public state in classes, so how do we make these things private?</p>
<pre><code><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="title">private</span> <span class="title">var</span> <span class="title">age</span>: <span class="title">Int</span>, <span class="title">private</span> <span class="title">var</span> <span class="title">name</span>: <span class="title">String</span>) {</span>

  fun sayHello() {
    println(<span class="string">"Hi, I am $name, and I am $age years old"</span>)
  }
}</code></pre>
<p>Yeah, they&#39;re public by default, this is a weird design decision - if we were looking to correct the sins of badly written Java programs this is not how I&#39;d start.</p>
<p>In fact, the notion of data-only objects is baked right into Kotlin, this is a data-bag or struct in this language:</p>
<pre><code>data <span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(val age: Int, val name: String)</span></code></pre>
<p>Notice the data key-word in front of class, theoretically this means that Kotlin will generate a toString and equals check for you (although this didn&#39;t work on my machine).</p>
<p><strong>What I&#39;d do differently</strong></p>
<p>There is a fundamental difference between data bags and objects, and I&#39;m fine with both of them existing. I don&#39;t think we even need all those key-words or constructs to make it happen. </p>
<p><em>Want private state in a behavioural object?</em></p>
<pre><code><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="title">age</span>: <span class="title">Int</span>, <span class="title">name</span>: <span class="title">String</span>) {</span>
  fun someBehaviour() {

  }
}</code></pre>
<p>That should be the default as far as I&#39;m concerned.</p>
<p><em>Want to expose that state?</em></p>
<p>Make it explicit,</p>
<pre><code><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="title">val</span> <span class="title">age</span>: <span class="title">Int</span>, <span class="title">val</span> <span class="title">name</span>: <span class="title">String</span>) {</span>
  fun someBehaviour() {

  }
}</code></pre>
<p><em>Want to expose that state as mutable?</em></p>
<pre><code><span class="class"><span class="keyword">class</span> <span class="title">Person</span>(<span class="title">mutval</span> <span class="title">age</span>: <span class="title">Int</span>, <span class="title">mutval</span> <span class="title">name</span>: <span class="title">String</span>) {</span>
  fun someBehaviour() {

  }
}</code></pre>
<p><em>Want immutable value data bags?</em></p>
<pre><code><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(val age: Int, val name: String)</span></code></pre>
<p>No behaviour = data bag. In fact, I&#39;d tolerate the data attribute in this case too although I feel that the more key-words a language has the less likely I am to want to use it.</p>
<p><em>I don&#39;t like lots of key-words</em></p>
<p>In fact, you know what? What&#39;s the difference between a function and an object? We&#39;ll cover some of this later but I don&#39;t really see why we need the class key-word at all, the above would be fine as</p>
<pre><code><span class="title">fun</span> Person(age: Int, name: String) {
  <span class="title">fun</span> someBehaviour() {

  }
}</code></pre>
<p>One of the reasons I quite like Clojure is that everything is just a function, and looking up how to do something is <em>always</em> a case of looking up an appropriate function - I&#39;ve just talked about some basic class functionality and I&#39;ve already had to go through 5 different key-words.</p>
<p>Reduce towards simplicity and have some opinions, that&#39;s all I&#39;m saying, I&#39;m a big fan of JavaScript&#39;s lack of features, I&#39;m actually a fan of Java&#39;s lack of features too, if we could just fix some problems in those languages then we&#39;d be great.</p>
<p>I feel with just what I&#39;ve shown here, we&#39;ve just made it even <em>easier</em> for Java developers to carry on <em>doing it wrong</em>, when there is actually a good opportunity to encourage them to go in a better direction with the code. </p>
<p>A default towards private and immutable would have been a logical choice and I don&#39;t know why this isn&#39;t the case.</p>
</div>
      <div id="links">
        <a href="/">Index</a>
        <a href="http://feed.codeofrob.com/RobAshton">Subscribe</a>
        <a href="http://twitter.com/robashton">Follow me</a>
      </div>
      <div id="hire-me">
        <h6>This used to ask if you wanted to hire me</h6>
        <p>But chances are I'm not available, as I'm busy shipping stuff.</p>
        <p>Drop me an e-mail anyway, as I like interesting problems.</p>
        <p><a href="mailto:robashton@codeofrob.com">Get in touch</a></p>
      </div>
      <div id="disqus">
        <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'codeofrob'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
    <div id="post-comments">

    </div>

<div class="footer" style="margin-top: 0px">
    <div class="container">
        <div class="row-fluid">
            <div class="span3">
                <div class="headline"><h3>Get In Touch</h3></div>
                <address class="address">
                    <ul class="icons-ul">
                        <li><i class="icon-li icon-envelope"></i>Email: <a href="mailto:robashton@codeofrob.com" class="">robashton@codeofrob.com</a></li>
                        <li><i class="icon-li icon-envelope"></i>Skype: <a href="skype:rob_ashton" class="">rob_ashton</a></li>
                    </ul>
                </address>
            </div><!--/span3-->
            <div class="span5">
                <div class="headline"><h3>Subscribe</h3></div>
                <p>I publish an <a href="http://feed.codeofrob.com/RobAshton">RSS feed</a> from my blog and some other activities</p>
            </div>
            <div class="span4">
                <div class="posts">
                  <div class="headline"><h3>Find me...</h3></div>
                  <p><a href="http://twitter.com/robashton"><img src="/assets/img/twitter.jpg" alt="" />
                  <a href="http://github.com/robashton"><img src="/assets/img/github.png" alt="" /></a></p>
                </div>
            </div><!--/span4-->
        </div><!--/row-fluid-->
    </div><!--/container-->
</div><!--/footer-->
<!--=== End Footer ===-->

<!--=== Copyright ===-->
<div class="copyright">
    <div class="container">
        <div class="row-fluid">
            <div class="span2">
              <a href="/">Rob Ashton</a>
            </div>
            <div class="span6">
              <p class="terms">2013 © Rob Ashton. ALL Rights Reserved.</p>
            </div>
        </div><!--/row-fluid-->
    </div><!--/container-->
</div><!--/copyright-->
<!--=== End Copyright ===-->

<!-- JS Global Compulsory -->
<script type="text/javascript" src="/assets/js/modernizr.custom.js"></script>
<script type="text/javascript" src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
<!-- JS Implementing Plugins -->
<script type="text/javascript" src="/assets/plugins/flexslider/jquery.flexslider-min.js"></script>
<script type="text/javascript" src="/assets/plugins/parallax-slider/js/modernizr.js"></script>
<script type="text/javascript" src="/assets/plugins/parallax-slider/js/jquery.cslider.js"></script>
<script type="text/javascript" src="/assets/plugins/back-to-top.js"></script>
<script type="text/javascript" src="/assets/plugins/jquery.sticky.js"></script>
<script type="text/javascript" src="/assets/plugins/fancybox/source/jquery.fancybox.pack.js"></script>
<!-- JS Page Level -->
<script type="text/javascript" src="/assets/js/app.js"></script>
<script type="text/javascript" src="/assets/js/pages/index.js"></script>
<script type="text/javascript">
    jQuery(document).ready(function() {
      	App.init();
        App.initFancybox();
        App.initSliders();
        Index.initParallaxSlider();
    });
</script>
<!--[if lt IE 9]>
    <script src="assets/js/respond.js"></script>
<![endif]-->
  </body>
</html>

