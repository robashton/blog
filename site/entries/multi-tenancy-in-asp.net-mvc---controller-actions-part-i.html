<!doctype html> <!--[if ie 7]> <html lang="en" class="ie7"> <![endif]-->
<!--[if ie 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if ie 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !ie]><!-->
<html lang="en"> <!--<![endif]-->
<head>
    <title id="title">Multi-tenancy in ASP.NET MVC - Controller Actions (Part I)</title>
    <meta charset="utf-8">
    <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="Description" content="Rob Ashton's blog and various other things. Javascript, C#, testing, whatever.">
    <meta name="author" content="">
    <link rel="alternate" type="application/atom+xml" href="http://feed.codeofrob.com/RobAshton" title="Rob Ashton's blog" />
    <link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/headers/header1.css">
    <link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="/assets/css/style_responsive.css">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/assets/plugins/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="/assets/css/themes/default.css">
    <link rel="stylesheet" type="text/css" href="/style.css"></link>
    <link rel="stylesheet" type="text/css" href="/rainbow.css"></link>
    <script type="text/javascript" src="/assets/js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-11207442-1']);
      _gaq.push(['_setDomainName', 'codeofrob.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body>
    <div class="header">
        <div class="container">
            <div class="logo">
             <h2><a href="/index.html">Rob Ashton</a></h2>
            </div>
            <div class="navbar">
                <div class="navbar-inner">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                    </a>
                    <div class="nav-collapse collapse">
                        <ul class="nav top-2">
                          <li>
                                <a href="/">Home</a>
                            </li>
                            <li>
                                <a href="/blog.html">Blog</a>
                            </li>
                            <li>
                                <a href="/statements.html">Testimonials</a>
                            </li>
                            <li>
                                <a href="/hire.html">Hire Me</a>
                            </li>
                    </div>
                </div>
            </div>
        </div>
    </div>

  <body>
    <div id="blog-entry">
      <h1 id="post-title">Multi-tenancy in ASP.NET MVC - Controller Actions (Part I)</h1>
      <h6>Published on <span class="date">2010-2-14</span></h6>
      <div id="post">
		<p><strong>Previous entries in the series</strong></p>
<ul>
    <li><a href="http://codeofrob.com/archive/2010/02/01/multi-tenancy-in-asp.net-mvc-why-do-we-want-to.aspx">Why we want it</a> </li>
    <li><a href="http://codeofrob.com/archive/2010/02/04/multi-tenancy-in-asp.net-mvc-breaking-it-down.aspx">Breaking it down + Themes</a> </li>
    <li><a href="http://codeofrob.com/archive/2010/02/08/multi-tenancy-in-asp.net-mvc-views.aspx">Views</a> </li>
</ul>
<p>&nbsp;<font face="Arial">In the last entry, we covered how and why we might want to replace existing views and partial views from the core application with our own from modules. We also covered that with this ability it was possible to add entirely new views and partial views.</font></p>
<p><font face="Arial">However, views need actions and actions come from controllers. If we add a new view to the application and the core application does not support that path with an action, that view cannot be loaded.</font></p>
<p><font face="Arial">It stands to reason therefore that our modules need the ability to add new controller actions (and indeed replace existing actions) at run-time on a per-request basis - again assuming we're going for full on multi-tenancy.</font></p>
<p><font face="Arial">Actions come from controllers, and by default controllers come from the main web assembly. Now obviously our modules should be as self contained as possible and therefore probably each have their own assemblies so they can be developed separately and added to the project ad-hoc.</font></p>
<p><font face="Arial">Once again, the ASP.NET MVC team have given us an extensibility point with which to override this default behaviour with the ability to implement our own controller factories.</font></p>
<p><font face="Arial"><font face="Arial"><strong>Resolving actions</strong><br>
As with the last topic, I will assume the presence of a configuration provider that can tell us which modules are loaded.<br>
For purposes of simplicity, the Module class now contains a reference to an Assembly that we'll assume was loaded in when the configuration was last scanned.<br>
</font></font></p>
<font face="Arial">
<pre class="brush: csharp;" title="code">    public class Module
    {
        public string Id
        {
            get;
            set;
        }

        public Assembly Assembly
        {
            get;
            set;
        }
    }
</pre>
<p><font face="Arial">The job of the ControllerFactory is another well documented concept; when a controller is required, the factory is invoked with the name of the controller being requested and the current request data. It is expected to return an instance of the controller (which is used for that single request), and then just like the ViewEngine is given that controller to dispose of at the end of the request.</font></p>
<p><font face="Arial">The simplest solution is clearly going to be that we look at the context we have access to and then work out which controller to return based on that context.<br>
The context in this case being the name of the controller, the action being requested and the collection of modules which are currently active for this request.</font></p>
<p><font face="Arial">Each module can therefore hold their own controllers with their own actions, and the controller factory can select which controller to return when a specific action is being invoked.</font></p>
<p><font face="Arial">I implement my controller factory from the base interface, which is System.Web.Mvc.IControllerFactory:</font>&nbsp;</p>
<pre class="brush: csharp;" title="code">    public class ModuleControllerFactory : IControllerFactory
    {
        public IController CreateController(System.Web.Routing.RequestContext requestContext, string controllerName)
        {
            throw new NotImplementedException();
        }

        public void ReleaseController(IController controller)
        {
            throw new NotImplementedException();
        }
    }
</pre>
<p>ReleaseController can just check for IDisposable and dispose if necessary, so we'll take that as read and focus on what we need to do in order to create the controller.</p>
</font><font face="Arial"><font face="Arial"><strong>
<h3><font face="Arial"><strong>The Goal</strong></font></h3>
</strong></font>
<p><font face="Arial">These are the modules exposed by the application, the controllers they provide and the actions those controllers have on them.</font></p>
<ul>
    <li><font face="Arial">CoreModule</font>
    <ul>
        <li><font face="Arial">HomeController</font> </li>
        <li><font face="Arial">ActionResult Index();</font> </li>
    </ul>
    </li>
    <li><font face="Arial">ModuleOne</font>
    <ul>
        <li><font face="Arial">HomeController</font>
        <ul>
            <li><font face="Arial">ActionResult Extra();</font> </li>
        </ul>
        </li>
    </ul>
    </li>
    <li><font face="Arial">ModuleTwo</font>
    <ul>
        <li><font face="Arial">HomeController</font>
        <ul>
            <li><font face="Arial">ActionResult Index();</font> </li>
            <li><font face="Arial">ActionResult Extra();</font> </li>
        </ul>
        </li>
        <li><font face="Arial">OtherController</font>
        <ul>
            <li><font face="Arial">ActionResult Index(); </font></li>
        </ul>
        </li>
    </ul>
    </li>
</ul>
<p>&nbsp;WIth the set-up, the following behaviour is desired:</p>
<p><font face="Arial"><strong>Core Module loaded:</strong></font></p>
<p><font face="Arial">/Home/Index requested =&gt; CoreModule Index Invoked<br>
/Home/Extra requested =&gt;&nbsp; Action Not found</font></p>
<p><font face="Arial"><strong>Core + ModuleOne Loaded</strong></font></p>
<p><font face="Arial">/Home/Index requested =&gt; CoreModule Index Invoked<br>
/Home/Extra requested =&gt;&nbsp; ModuleOne Extra Invoked</font></p>
<p><font face="Arial"><strong>Core + ModuleOne + ModuleTwo Loaded (in that order)</strong></font></p>
<p><font face="Arial">/Home/Index requested =&gt; ModuleTwo Index Invoked<br>
/Home/Extra requested =&gt; ModuleTwo Extra Invoked<br>
/Other/Index requested =&gt; ModuleTwo Index Invoked<br>
</font></p>
<font face="Arial">
<h3><font face="Arial">A Solution</font></h3>
<p>This is actually quite tricky, as the solution is going to involve not only scanning for the controllers, but scanning for methods on those controllers that match the actions being requested.</p>
<p><font face="Arial">There are a lot of rules involved already in MVC selecting the right method to call from a controller, and we don't want to go down the route of duplicating this, so this is where we set a convention and say that if *any* action is found with the name being requested, that we'll use that controller and assume that all the necessary permutations of that action will be provided too. (A post action vs Get action for example).</font></p>
<p><font face="Arial">There are two parts to solving this problem, finding the type we want to create, and creating the controller from that type.</font></p>
<p><font face="Arial">The process will be similar to that of the ViewEngine example:</font></p>
<p><font face="Arial">1) Reverse the module list order so we have the most recently loaded first<br>
2) Scan all the types in the assembly for that module<br>
3) Find a type with the name we're looking for ( &lt;Name&gt;Controller )<br>
4) Scan the methods on that type to find the action we're looking for<br>
5) If found, return this type<br>
6) Else Continue</font></p>
<font face="Arial">
<p><font face="Arial">Obviously reflecting on all these types is a slow process, and we should cache the type once found by configuration id, controller name and action name. </font></p>
<p><font face="Arial">Here is some code which loosely achieves the above:</font></p>
<font face="Arial">
<pre class="brush: csharp;" title="code">private Type FindControllerType(String controllerName, RequestContext requestContext, Configuration currentConfiguration)
        {
            // Generate the type name we're looking for
            String controllerTypeName = string.Format("{0}Controller", controllerName);

            // Get the action and therefore method name we're looking for
            String actionName = (string)requestContext.RouteData.Values["action"];

            // TODO: Check Cache here

            // Get modules in reverse order
            var searchModules = currentConfiguration
                .Modules
                .Reverse();

            foreach (var module in searchModules)
            {
                // Get all the types in the assembly
                Type[] controllerTypes = module.Assembly.GetTypes()
                    .Where(
                        t =&gt;
                            // Where the type name is the one we're looking for
                            t.Name == controllerTypeName &amp;&amp;

                            // Where it can be cast to a controller
                            typeof(IController).IsAssignableFrom(t) &amp;&amp;

                            // And there is a public instance method with the name we're looking for on that type
                            t.GetMethods(System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.Instance)
                            .Where(m =&gt; m.Name == actionName).Count() &gt; 0

                        ).ToArray();

                // Skip to the next module if no types found
                if (controllerTypes.Length == 0) { continue; }

                // Else, simply return the first one found
                return controllerTypes[0];
            }

            // Fail
            return null;
        }
</pre>
<font face="Arial">
<p><br>
A very rudimentary controller factory implementation would therefore look something like this:<br>
</p>
<pre class="brush: csharp;" title="code"> public class ModuleControllerFactory : IControllerFactory
    {
        private IConfigurationProvider mConfigurationProvider;

        public ModuleControllerFactory(IConfigurationProvider configurationProvider)
        {
            mConfigurationProvider = configurationProvider;
        }

        public IController CreateController(System.Web.Routing.RequestContext requestContext, string controllerName)
        {
            Type t = FindControllerType(controllerName, requestContext, mConfigurationProvider.GetActiveConfiguration());
            return (IController)Activator.CreateInstance(t);
        }

        public void ReleaseController(IController controller)
        {
            IDisposable disposable = controller as IDisposable;
            if (disposable != null)
            {
                disposable.Dispose();
            }
        }
// Etc
</pre>
<p><font face="Arial">It is of course probably desirable to instantiate the controller using your favourite IOC container&nbsp; - so for StructureMap for example instead of using Activator.CreateInstance you would call ObjectFactory.GetInstance(t);</font></p>
<p><font face="Arial">(Actually, you'd probably inject the container as well rather than calling ObjectFactory directly but you get the gist).</font></p>
<font face="Arial"><font face="Arial">
<h3><font face="Arial">Summary</font></h3>
<p>Essentially, we can completely re-wire this part of the ASP.NET MVC framework to do what we want it to do. We can load our controllers from wherever based on whatever context we like - and this gives us a powerful mechanism for pluggability and therefore multi-tenancy.</p>
<p><font face="Arial">I did contemplate trying to achieve this through routing - custom routing constraints and handlers - but it's not a tidy solution, it generally means having different names for your controllers, or playing havok with namespaces and configuration and because a lot of that configuration is static it often involves re-compilation.</font></p>
<p><font face="Arial">Re-compilation is something to be avoided, as we ideally want to be able to add new customers by just modifying configuration.</font></p>
<p><font face="Arial">Anyway, there are a number of options and this is just one of them,&nbsp; I'll be hoping to cover a crazy solution using Reflection.Emit and hopefully delve into MEF before I'm done with this particular part of the multi-tenancy story.</font><br>
</p>
</font></font></font></font></font></font></font>
	</div>
      <div id="links">
        <a href="/">Index</a>
        <a href="http://feed.codeofrob.com/RobAshton">Subscribe</a>
        <a href="http://twitter.com/robashton">Follow me</a>
      </div>
      <div id="hire-me">
        <h6>This used to ask if you wanted to hire me</h6>
        <p>But chances are I'm not available, as I'm busy shipping stuff.</p>
        <p>Drop me an e-mail anyway, as I like interesting problems.</p>
        <p><a href="mailto:robashton@codeofrob.com">Get in touch</a></p>
      </div>
      <div id="disqus">
        <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'codeofrob'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
    <div id="post-comments"><div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=2aca90b7f75d70cdc3ff59a8f81951ec&size=50&default=identicon"/>
<p>jt</p></div>
<div class="comment-body">
<br/> 				Thanks for the series! It's very interesting, can't wait for each new post :D Specially using MEF ;) Shame we can't switch out these modules at runtime due to ASP.NET Routing's limitations :(
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=b0b31e612e528d7159bfabbfad784d2a&size=50&default=identicon"/>
<p>Blob</p></div>
<div class="comment-body">
<br/> 				Hi,Do you plan to create a sample application "Multi tenancy in ASP.NET MVC" according to your articles?Bye and thank you,
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=b6a6693f03003f7ab0f9b0882e9c2dde&size=50&default=identicon"/>
<p>robashton</p></div>
<div class="comment-body">
<br/> 				Jt =&rt; MEF &lt;-- Me too, it's quite exciting - I prefer the Reflection.Emit version but that's just because I find it entertaining to write :)Blob => YES, DEFINITELY! I have actual plans to create a multi-tenant application over a series of blog entries at the end of this series
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=0850f240a58689573afc7cb20ede11dd&size=50&default=identicon"/>
<p>Bruce</p></div>
<div class="comment-body">
<br/> 				I'm definitely looking forward to the blog entries in which you put together a simple multi-tenant application.I'm working out a multi-tenant application of my own, but my solutions were not nearly as cool as yours.It seems that this should be a very popular topic, but I haven't found many discussing it online.
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="/images/IdenticonHandler.ashx?code=-2145463965"/>
<p>Blob</p></div>
<div class="comment-body">
<br/> 				robashton  =&rt; Thanks
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="/images/IdenticonHandler.ashx?code=2064151457"/>
<p>Sean</p></div>
<div class="comment-body">
<br/> 				Awesome awesome awesome stuff here.  Really looking forward to your progress and the resultant application.
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=36921282d6398b7c55828689ec2d8be4&size=50&default=identicon"/>
<p>Matt</p></div>
<div class="comment-body">
<br/> 				Very interesting and well written posts.  Very much looking forward to the upcoming posts as this is something that would be very very useful provided it can be done in a logical manner.
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=36921282d6398b7c55828689ec2d8be4&size=50&default=identicon"/>
<p>Matt</p></div>
<div class="comment-body">
<br/> 				So I'm playing around with MvcEx in my project and have a few errors I'm trying to work though.  Everything seems to be working fine so far, but I have a generic base controller where I override the OnException method so I can do some work before throwing the exception.Any suggestion on how I can still run my custom code in this method when my controller is now inheriting from MvcExActionContainer?
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=b6a6693f03003f7ab0f9b0882e9c2dde&size=50&default=identicon"/>
<p>robashton</p></div>
<div class="comment-body">
<br/> 				Again with the disclaimer that this is just a reference library, I can tell you that it is indeed possible to still have a base controller in MvcExmApplication.ControllerFactory.SetBaseControllerType(typeof(BaseController));Where mApplication is the IMvcExApplicationThis comes with the caveat that the base controller type must inherit from MvcExController.I'm thinking of ditching the componentised controllers in our code and replacing them with the above solution (although it's less 'neat')
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=36921282d6398b7c55828689ec2d8be4&size=50&default=identicon"/>
<p>Matt</p></div>
<div class="comment-body">
<br/> 				So I'm still plugging away at this :).  I really like the idea of what you've conceived with this MvcEx and it looks like you've put some work into it.My current problem is that if I set up my BaseController to inherit from MvcExController, then all of my controllers that inherit from BaseController and up being MvcExControllers.But the only way I can get my Home controller to get recognized is to use the MvcExActionContainer attribute on it, as you have in the MvcEx solution.This of course doesn't actually work later on as it tries to build in CreateMethodOnDynamicController as it's looking for ActionContainer methods that my HomeController doesn't have since it's not inherited from MvcExActionContainer.As I write this I realize of course it shouldn't work the way I have it, but I can't seem to get my Home controller recognized any other way.  Clearly I'm just not quite yet grasping the bigger picture of how these all work together.Do you have any suggestions on how I should structure my controllers with my BaseController inheriting from MvcExController?
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=b6a6693f03003f7ab0f9b0882e9c2dde&size=50&default=identicon"/>
<p>robashton</p></div>
<div class="comment-body">
<br/> 				Change your controllers to inherit from MvcExActionContainer - they'll still get the behaviour from your BaseControllerThe limitation here is that you can only have one base controller - but you can always make a base action container if you need shared functionality.Like I said above I'm not sure this is the best solution for backwards compatability reasons - I've effectively removed the responsibility of generic request handling to a separate class (the base controller), and left the actions able to come from anywhere for a particular controller.IMO this is how it should work anyway, why you've got to have all your actions on a single controller which also has control over the entire request lifecycle is beyond me.So, what we have here (and again I'm not saying it's *right*), isCreate a base controller and tell MvcEx to use it - this can be used to intercept all requests to introduce common logic (action filters etc)Create your action containers inheriting from MvcExActionContainer (Yeah I know, an attribute AND a class? I'm  tempted to ditch the requirement for MvcExActionContainer inheritance altogether)
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=b6a6693f03003f7ab0f9b0882e9c2dde&size=50&default=identicon"/>
<p>robashton</p></div>
<div class="comment-body">
<br/> 				Oh, and a new blog entry will be incoming once I've met a deadline at work - manic  times at the moment :)
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=fa8925305aa1a75a20528d9334d739a3&size=50&default=identicon"/>
<p>Asad Ali Butt</p></div>
<div class="comment-body">
<br/> 				reading your posts makes one feel more comfortable about MVC stuff. Do appriciate
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=d0dab5fda667ffca2cb25c915e631508&size=50&default=identicon"/>
<p>Trent</p></div>
<div class="comment-body">
<br/> 				Hey is there a part 2 to this article and is there a sample app
				</div></div>
<div class="comment">
<div class="comment-author">
<img src="http://www.gravatar.com/avatar.php?gravatar_id=b6a6693f03003f7ab0f9b0882e9c2dde&size=50&default=identicon"/>
<p>robashton</p></div>
<div class="comment-body">
<br/> 				Writing it right now!I ran out of steam on this series because of work, so I'll be trying to wrap it up in the next couple of entries, and then start blogging about the other aspects multi-tenancy in ASP.NET MVC that we've found to be a struggle :)
				</div></div>
</div>

<div class="footer" style="margin-top: 0px">
    <div class="container">
        <div class="row-fluid">
            <div class="span3">
                <div class="headline"><h3>Get In Touch</h3></div>
                <address class="address">
                    <ul class="icons-ul">
                        <li><i class="icon-li icon-envelope"></i>Email: <a href="mailto:robashton@codeofrob.com" class="">robashton@codeofrob.com</a></li>
                        <li><i class="icon-li icon-envelope"></i>Skype: <a href="skype:rob_ashton" class="">rob_ashton</a></li>
                    </ul>
                </address>
            </div><!--/span3-->
            <div class="span5">
                <div class="headline"><h3>Subscribe</h3></div>
                <p>I publish an <a href="http://feed.codeofrob.com/RobAshton">RSS feed</a> from my blog and some other activities</p>
            </div>
            <div class="span4">
                <div class="posts">
                  <div class="headline"><h3>Find me...</h3></div>
                  <p><a href="http://twitter.com/robashton"><img src="/assets/img/twitter.jpg" alt="" />
                  <a href="http://github.com/robashton"><img src="/assets/img/github.png" alt="" /></a></p>
                </div>
            </div><!--/span4-->
        </div><!--/row-fluid-->
    </div><!--/container-->
</div><!--/footer-->
<!--=== End Footer ===-->

<!--=== Copyright ===-->
<div class="copyright">
    <div class="container">
        <div class="row-fluid">
            <div class="span2">
              <a href="/">Rob Ashton</a>
            </div>
            <div class="span6">
              <p class="terms">2013 © Rob Ashton. ALL Rights Reserved.</p>
            </div>
        </div><!--/row-fluid-->
    </div><!--/container-->
</div><!--/copyright-->
<!--=== End Copyright ===-->

<!-- JS Global Compulsory -->
<script type="text/javascript" src="/assets/js/modernizr.custom.js"></script>
<script type="text/javascript" src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
<!-- JS Implementing Plugins -->
<script type="text/javascript" src="/assets/plugins/flexslider/jquery.flexslider-min.js"></script>
<script type="text/javascript" src="/assets/plugins/parallax-slider/js/modernizr.js"></script>
<script type="text/javascript" src="/assets/plugins/parallax-slider/js/jquery.cslider.js"></script>
<script type="text/javascript" src="/assets/plugins/back-to-top.js"></script>
<script type="text/javascript" src="/assets/plugins/jquery.sticky.js"></script>
<script type="text/javascript" src="/assets/plugins/fancybox/source/jquery.fancybox.pack.js"></script>
<!-- JS Page Level -->
<script type="text/javascript" src="/assets/js/app.js"></script>
<script type="text/javascript" src="/assets/js/pages/index.js"></script>
<script type="text/javascript">
    jQuery(document).ready(function() {
      	App.init();
        App.initFancybox();
        App.initSliders();
        Index.initParallaxSlider();
    });
</script>
<!--[if lt IE 9]>
    <script src="assets/js/respond.js"></script>
<![endif]-->
  </body>
</html>

